# ☕ 커피의 특성에 따른 원두 등급 예측

## 📋 프로젝트 개요

K-최근접 이웃(KNN) 알고리즘을 활용하여 커피 원두의 특성 데이터를 분석하고 등급을 예측하는 웹 서비스를 구현했습니다. 백엔드는 Django, 프론트엔드는 Vue.js를 사용하여 완전한 웹 애플리케이션으로 개발했습니다.

---

## 🔍 프로젝트 목표

### 1️⃣ 데이터 기반의 커피 원두 등급 예측 모델 개발

- 커피의 특성(향, 맛, 산미, 바디감 등)을 분석하여 원두 등급을 객관적으로 예측
- 머신러닝 모델을 통한 정확도 높은 예측 시스템 구축
- 다양한 모델 비교를 통한 최적의 알고리즘 선정

### 2️⃣ 사용자 친화적인 웹 인터페이스 개발

- 직관적인 입력 폼을 통해 커피 특성 데이터 입력
- 예측 결과를 시각적으로 표현하는 결과 페이지 구현
- 프론트엔드와 백엔드 간의 효율적인 데이터 통신 구현

---

## 💻 기술 스택

### 데이터 분석 및 모델링

- **Python**: 데이터 전처리 및 모델 개발
- **Pandas/NumPy**: 데이터 처리
- **Scikit-learn**: 머신러닝 모델 구현(KNN, 앙상블)
- **Matplotlib/Seaborn**: 데이터 시각화
- **Google Colab**: 개발 환경

### 백엔드

- **Django**: 웹 서버 및 API 구현
- **Joblib**: 모델 저장 및 불러오기

### 프론트엔드

- **Vue.js**: SPA(Single Page Application) 구현
- **Axios**: HTTP 요청 처리
- **HTML/CSS**: 사용자 인터페이스 디자인

---

## 📊 데이터셋 개요

### 📌 주제 선정 이유

- 기호 식품 시장에서 커피의 비중이 지속적으로 증가하고 있음
- 다양한 커피 원두가 새롭게 개발되면서 품질 평가 시스템의 중요성 증가
- 커피의 특성에 따른 원두 등급화가 용이하다면 커피 시장에서 활용도가 높을 것으로 예상

### 📌 데이터셋 소개

- **출처**: [Kaggle - Coffee Quality Database](https://www.kaggle.com/datasets/volpatto/coffee-quality-database-from-cqi/data)
- **내용**: 아라비카, 로부스타 원두의 품질 평가 데이터
- **주요 특성**:
    - Aroma(향), Flavor(맛), Aftertaste(여운)
    - Acidity(산미), Body(바디감), Balance(밸런스)
    - Uniformity(균일성), Moisture(수분 함량)
    - Altitude_Mean_Meters(재배 고도)
    - Total_Cup_Points(총점)

---

## 🔄 프로젝트 진행 과정

### 1️⃣ 데이터 전처리

- CSV 파일 로드 및 탐색적 데이터 분석(EDA)
- 결측치 처리 및 이상치(아웃라이어) 제거
- 수치형 컬럼 분포 확인 및 시각화
- 목표 변수(Total_Cup_Points) 범주화: 원두 등급 정의
    - 1등급(스페셜티): 상위 25% (높은 점수)
    - 2등급(프리미엄): 중간 25% (중간 점수)
    - 3등급(상업용): 하위 50% (낮은 점수)

### 2️⃣ 모델 개발 및 평가

- KNN(K-최근접 이웃) 모델 학습
    - 최적의 K값 탐색 (테스트 정확도 기준)
    - 학습 데이터 정확도: 86.58%
    - 테스트 데이터 정확도: 87.84%
- 앙상블 모델 개발 (Voting Classifier)
    - 로지스틱 회귀, KNN, 결정 트리 모델 앙상블
    - 정확도: 86.76%
- 모델 성능 비교 결과 KNN 모델 선정

### 3️⃣ 백엔드 개발 (Django)

- Django 프로젝트 설정 (CORS 통신 설정)
- 예측 API 엔드포인트 구현 (/coffeePredict)
- 학습된 모델 불러오기 및 예측 수행
- JSON 응답 형식으로 예측 결과 반환

### 4️⃣ 프론트엔드 개발 (Vue.js)

- 커피 특성 입력 폼 구현 (CoffeeFormView.vue)
- 사용자 입력값 유효성 검증
- Axios를 활용한
Django API 호출
- 예측 결과 시각화 페이지 구현 (ResultView.vue)
    - 등급별 이미지 표시
    - 직관적인 UI로 결과 전달

---

## 📱 구현 결과

### 웹 서비스 기능
![project2](https://github.com/user-attachments/assets/511f49da-8097-4bb5-a7a6-a790b09dd469)
1. **커피 특성 입력 폼**
    - 사용자가 9개 특성값 입력
    - 각 입력 필드마다 적절한 범위 제한
2. **등급 예측 프로세스**
    - 입력 데이터를 백엔드로 전송
    - 머신러닝 모델로 예측 수행
    - 예측 결과를 프론트엔드로 반환
3. **결과 표시 화면**
    - 1등급(스페셜티) / 2등급(프리미엄) / 3등급(상업용) 이미지 표시
    - 예측된 등급에 따른 시각적 피드백 제공

### 시스템 아키텍처

- **프론트엔드**: Vue.js 기반 SPA 애플리케이션
- **백엔드**: Django REST API
- **모델**: 학습된 KNN 모델(.pkl 파일)

---

## **🎥 홈페이지 시연 영상**

---

## 🔬 모델 성능 분석

| 모델 | 정확도 | 비고 |
| --- | --- | --- |
| KNeighborsClassifier | 87.84% | 최적 K값 = 57 |
| LogisticRegression | 86.04% | max_iter=1000 설정 |
| DecisionTreeClassifier | 81.98% | max_depth=5 설정 |
| VotingClassifier | 86.76% | soft voting 방식 |

KNN 모델이 가장 높은 정확도를 보여 최종 모델로 선정했습니다. KNN은 특히 커피 특성 간의 관계성을 잘 포착하는 것으로 나타났으며, 이는 커피 품질 평가에 있어 여러 특성 간의 유사성이 중요하다는 점을 보여줍니다.

---

## 🧠 기술적 도전과 해결 방법

### 1️⃣ 데이터 전처리 과정의 최적화

- **문제**: 이상치(아웃라이어)의 존재로 모델 정확도 저하
- **해결**: IQR(사분위수 범위) 방식을 활용한 이상치 감지 및 처리
- **결과**: 데이터 품질 향상 및 모델 성능 개선

### 2️⃣ 최적 하이퍼파라미터 탐색

- **문제**: KNN 모델의 k값에 따라 성능 변동이 큼
- **해결**: 다양한 k값(1~103)에 대한 테스트를 수행하여 최적값(k=57) 도출
- **결과**: 과적합을 방지하면서 높은 예측 정확도 달성

### 3️⃣ 프론트엔드-백엔드 통신

- **문제**: CORS 정책으로 인한 API 통신 장애
- **해결**: Django 설정에 CORS_ORIGIN_WHITELIST 추가 및 적절한 헤더 설정
- **결과**: 안정적인 프론트엔드-백엔드 통신 구현

---

## 🔍 프로젝트 결과 및 배운 점

### 주요 성과

- 머신러닝 모델을 실제 웹 서비스에 통합하는 전체 프로세스 이해
- 데이터 전처리부터 모델 학습, 서비스 배포까지 ML 파이프라인 구축 경험
- Django와 Vue.js를 연동한 풀스택 웹 개발 역량 향상

### 향후 개선점

1. **데이터 다양화**: 더 많은 원두 샘플 데이터 확보를 통한 모델 정확도 향상
2. **모델 고도화**: 딥러닝 모델 도입 검토 및 하이퍼파라미터 자동 튜닝
3. **사용자 경험 개선**: 결과 페이지에 등급별 특성 설명 추가
4. **기능 확장**: 사용자의 취향에 맞는 커피 추천 기능 추가

---

## 📆 프로젝트 일정

| 단계 | 일정 | 내용 |
| --- | --- | --- |
| 기획서 작성 | 6/10 (1일차) | 프로젝트 범위 및 기능 정의 |
| 데이터 분석 | 6/11 (2일차) | 데이터 탐색 및 전처리 |
| 모델 개발 | 6/12 (3일차) | KNN 및 앙상블 모델 학습 및 평가 |
| 백엔드 개발 | 6/13 (4일차) | Django API 개발 및 모델 연동 |
| 프론트엔드 개발 | 6/14 (5일차) | Vue.js 기반 UI 구현 및 통합 테스트 |

---

## 👨‍💻 관련 자료

### 코드 저장소

- [GitHub - 커피 원두 등급 예측 프로젝트](https://github.com/username/coffee-grade-prediction)

### 개발 환경

- Google Colab (모델 개발)
- PyCharm (Django 백엔드)
- VS Code (Vue.js 프론트엔드)

### 주요 라이브러리

- scikit-learn 1.0.2
- pandas 1.3.5
- Django 4.0.1
- Vue.js 3.2.0
- Axios 0.25.0

---

## 📜 Copyright  
© 2024 Bae-Sunny. All rights reserved.
