# ☕ **커피 원두 등급 예측 서비스**

## 📌 프로젝트 목표 및 개요

커피 원두의 품질 평가는 전문가의 경험에 의존하거나 주관적일 수 있다는 점에 주목했습니다. 이 프로젝트는 **데이터 기반의 객관적인 원두 등급 예측**을 목표로, K-최근접 이웃(KNN) 알고리즘을 활용한 머신러닝 모델과 이를 편리하게 사용할 수 있는 **풀스택 웹 서비스(Django + Vue.js)**를 개발했습니다. 사용자가 커피의 주요 특성(향, 맛, 산미 등)을 입력하면, 예상되는 원두 등급을 쉽고 빠르게 확인할 수 있습니다.

---

## ✨ 주요 기능 및 가치

- **객관적인 등급 예측:** 커피의 향, 맛, 산미 등 9가지 주요 특성 데이터를 기반으로 **머신러닝 모델(KNN)**이 객관적인 원두 등급(스페셜티/프리미엄/상업용)을 예측하여, 품질 평가의 참고 자료를 제공합니다.
- **사용자 친화적 인터페이스:** 직관적인 웹 인터페이스를 통해 누구나 쉽게 커피 특성 값을 입력하고, 예측 결과를 이미지와 함께 명확하게 확인할 수 있습니다.
- **풀스택 기술 통합:** 데이터 분석(Python), 백엔드 API(Django), 프론트엔드(Vue.js) 기술을 통합하여 **완전한 웹 애플리케이션**으로 구현, 실제 서비스 환경에서의 동작을 경험할 수 있습니다.

---

## 🛠️ 기술 스택

- **Data Analysis & ML:** Python, Pandas, NumPy, Scikit-learn (KNN, Logistic Regression, Decision Tree, Voting Classifier), Matplotlib, Seaborn
- **Backend:** Django, Joblib
- **Frontend:** Vue.js, Axios, HTML5, CSS3
- **Development Environment:** Google Colab, PyCharm, VS Code
- **Collaboration:** Git, GitHub

---

## 📊 활용 데이터셋 소개

최근 커피 시장의 성장과 다양한 원두 등장에 따라 객관적인 품질 평가의 중요성이 커지고 있습니다. 이 프로젝트는 **Kaggle의 Coffee Quality Database**를 활용하여 아라비카/로부스타 원두의 품질 데이터를 분석했습니다. 모델 학습에는 **Aroma(향), Flavor(맛), Acidity(산미), Body(바디감)** 등 객관적인 측정 지표와 최종 평가 점수(Total Cup Points)를 사용했습니다.

*(데이터셋 출처: [Kaggle - Coffee Quality Database](https://www.kaggle.com/datasets/volpatto/coffee-quality-database-from-cqi/data))*

---

## 🔄 개발 과정 및 주요 결정

1. **데이터 준비 및 분석 (Data Preparation & EDA):**
    - CSV 데이터를 로드하여 각 특성의 분포, 결측치, 이상치 등을 탐색적 데이터 분석(EDA)으로 확인했습니다.
    - 결측치는 평균값으로 대체하고, IQR(사분위수 범위) 기법을 활용하여 모델 성능에 영향을 줄 수 있는 이상치를 제거하여 데이터 품질을 높였습니다.
    - 목표 변수인 `Total_Cup_Points`를 기준으로 상위 25% (스페셜티), 중간 25% (프리미엄), 하위 50% (상업용)로 **원두 등급을 범주화**하여 예측 모델의 타겟으로 정의했습니다.
2. **머신러닝 모델 개발 및 선정 (Model Development & Selection):**
    - 주요 모델로 **KNN(K-최근접 이웃)** 알고리즘을 선택하고, 다양한 K값(1~103) 테스트를 통해 **최적의 K=57**을 찾아 테스트 데이터 기준 **87.84%의 정확도**를 확보했습니다.
    - 모델 성능 비교를 위해 로지스틱 회귀, 결정 트리 모델을 학습하고, 이들을 결합한 앙상블 모델(Voting Classifier, Soft Voting)도 구현했습니다. (정확도 86.76%)
    - 최종적으로 가장 높은 정확도를 보이고 커피 특성 간 유사성을 잘 반영하는 **KNN 모델을 최종 예측 모델로 선정**했습니다.
3. **백엔드 API 개발 (Backend Development - Django):**
    - 사용자 입력값을 받아 예측 결과를 반환하는 `/coffeePredict` **REST API 엔드포인트**를 구현했습니다.
    - 학습된 KNN 모델(`.pkl` 파일)을 `joblib` 라이브러리로 로드하여 예측 로직을 수행하도록 했습니다.
    - 프론트엔드(Vue.js)와의 원활한 통신을 위해 **CORS 설정**을 완료했습니다.
4. **프론트엔드 UI/UX 개발 (Frontend Development - Vue.js):**
    - 사용자가 9가지 커피 특성 값을 쉽게 입력할 수 있는 **입력 폼(CoffeeFormView.vue)**을 구현하고, 각 필드에 유효성 검증 및 범위 제한을 적용했습니다.
    - **Axios**를 사용하여 입력 데이터를 백엔드 API로 비동기 전송하고, 예측 결과를 받아왔습니다.
    - 예측된 등급(1/2/3)에 따라 **결과 이미지와 텍스트를 동적으로 표시**하는 결과 페이지(ResultView.vue)를 구현하여 사용자 경험을 개선했습니다.

---

## 📱 구현 결과

사용자가 웹 페이지에서 9가지 커피 특성 값을 입력하면, 백엔드 Django 서버로 데이터가 전송됩니다. 서버는 학습된 KNN 모델을 이용해 원두 등급을 예측하고, 그 결과를 다시 프론트엔드 Vue.js 애플리케이션으로 보내 사용자에게 해당 등급의 이미지와 함께 보여줍니다.

![image](https://github.com/user-attachments/assets/6673ffe4-3ca2-4d8c-b6a6-a1ab9a4148a6)

- **시스템 아키텍처:** 프론트엔드(Vue.js SPA) - 백엔드(Django REST API) - 머신러닝 모델(.pkl)

---

## 🔬 모델 성능 비교

| 모델 유형 | 테스트 정확도 | 주요 특징/설정 |
| --- | --- | --- |
| **KNeighborsClassifier** | **87.84%** | **최종 선정 모델 (K=57)** |
| LogisticRegression | 86.04% | max_iter=1000 |
| DecisionTreeClassifier | 81.98% | max_depth=5 |
| VotingClassifier | 86.76% | Soft Voting 방식 |

*KNN 모델이 가장 높은 정확도를 보여 최종 모델로 선정했습니다. 이는 커피 품질 평가에 있어 여러 특성 간의 유사성이 중요함을 시사합니다.*

---

## 💡 주요 기술적 도전과 해결 과정

- **데이터 품질 확보:** 모델 성능 저하의 원인이 될 수 있는 이상치를 **IQR 기법**으로 효과적으로 탐지하고 제거하여 데이터의 신뢰도를 높였습니다.
- **최적 하이퍼파라미터 탐색:** KNN 모델의 성능 변동성을 고려하여 **다양한 K값을 테스트**하고 비교 분석하여 과적합을 피하면서 가장 높은 예측 정확도를 내는 최적의 K값(57)을 찾아냈습니다.
- **프론트엔드-백엔드 연동:** 개발 초기 CORS 정책으로 인한 API 통신 문제를 겪었으나, **Django의 CORS 관련 설정을 정확히 구성**하여 안정적인 데이터 교환을 구현했습니다.

---

## 🌱 성장 및 배움 (Key Takeaways)

- **ML 모델 서비스화 경험:** 머신러닝 모델을 학습시키는 것뿐만 아니라, 실제 웹 서비스에 통합하여 사용자가 직접 상호작용할 수 있도록 만드는 **MLOps 파이프라인의 기초**를 경험했습니다.
- **풀스택 개발 역량 강화:** 데이터 분석부터 백엔드 API 개발(Django), 사용자 인터페이스 구현(Vue.js)까지 **전체 웹 애플리케이션 개발 주기**를 경험하며 풀스택 개발자로서의 역량을 한 단계 높일 수 있었습니다.
- **데이터 기반 의사결정:** EDA 결과와 모델 성능 비교 분석을 통해 최적의 모델과 파라미터를 선택하는 등, **데이터에 근거하여 기술적 결정을 내리는 과정**을 연습했습니다.

### 🚀 향후 개선 방향

1. **모델 성능 고도화:** 더 다양한 종류의 원두 데이터를 확보하고, 최신 딥러닝 모델(예: TabNet 등) 적용을 검토하여 예측 정확도를 더욱 향상시킵니다.
2. **사용자 맞춤 기능:** 예측 결과 페이지에 해당 등급 원두의 일반적인 특성 설명을 추가하고, 사용자의 과거 입력 기록을 바탕으로 **취향에 맞는 커피를 추천하는 기능**을 개발합니다.
3. **피드백 시스템:** 사용자가 실제 느낀 맛과 예측 결과를 비교하여 피드백을 남길 수 있는 기능을 추가하여 모델 개선에 활용합니다.

---
